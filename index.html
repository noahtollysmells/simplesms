<!DOCTYPE html>
<html>
<head>
    <title>Simple Chat</title>
    <script src="https://cdn.ably.com"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        #chatbox { border: 1px solid #ccc; height: 300px; overflow-y: scroll; padding: 10px; margin-bottom: 10px; }
        input { width: 80%; padding: 10px; }
        button { padding: 10px; }
    </style>
</head>
<body>

    <h2>Local Network Chat</h2>
    <div id="chatbox"></div>
    <input type="text" id="messageInput" placeholder="Type a message...">
    <button onclick="sendMessage()">Send</button>

    <script>
        // Connect to Ably using your key
        const ably = new Ably.Realtime('mQBTog.DO3Uhw:eIeE_76e_a-KhqAn1L1DC-bTTXo1na0eTylY3tY2NVE');
        const channel = ably.channels.get('local-chat');

        // Receive messages
        channel.subscribe('msg', (message) => {
            const chatbox = document.getElementById('chatbox');
            chatbox.innerHTML += '<p><b>Friend:</b> ' + message.data + '</p>';
            chatbox.scrollTop = chatbox.scrollHeight; // Auto-scroll
        });

        // Send messages
        function sendMessage() {
            const input = document.getElementById('messageInput');
            if(input.value.trim() !== "") {
                channel.publish('msg', input.value);
                input.value = '';
            }
        }

        // Allow "Enter" key to send
        document.getElementById('messageInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') sendMessage();
        });
    </script>
</body>
</html>
